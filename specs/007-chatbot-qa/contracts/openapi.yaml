openapi: 3.0.3
info:
  title: Leadrat Chatbot API
  version: 0.1.0
  description: Context-grounded brochure Q&A via Gemini 2.5-Flash
servers:
  - url: http://localhost:5000
paths:
  /chatbot/query:
    post:
      summary: Answer a user question strictly from provided brochure context
      operationId: chatbotQuery
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: [question, context]
              properties:
                question:
                  type: string
                  maxLength: 500
                  description: User question
                context:
                  $ref: '#/components/schemas/StructuredPropertyData'
      responses:
        '200':
          description: Chatbot answer
          content:
            application/json:
              schema:
                type: object
                required: [answer]
                properties:
                  answer:
                    type: string
        '400':
          description: Validation error
        '500':
          description: Processing failure
components:
  schemas:
    StructuredPropertyData:
      type: object
      required: [project_overview, amenities, connectivity, floor_plans, faqs]
      properties:
        project_overview:
          type: object
          properties:
            project_name: { type: string }
            developer_name: { type: string }
            location: { type: string }
            description: { type: string }
            launch_date: { type: string }
            possession_date: { type: string }
            rera_number: { type: string }
            total_towers: { type: string }
            total_units: { type: string }
            project_type: { type: string }
        amenities:
          type: array
          items: { type: string }
        connectivity:
          type: object
          properties:
            nearby_schools: { type: array, items: { type: string } }
            nearby_hospitals: { type: array, items: { type: string } }
            nearby_malls: { type: array, items: { type: string } }
            transport_facilities: { type: array, items: { type: string } }
        floor_plans:
          type: array
          items:
            type: object
            properties:
              tower_name: { type: string }
              bhk_type: { type: string }
              carpet_area: { type: string }
              super_area: { type: string }
              price_range: { type: string }
              image_reference: { type: string }
        faqs:
          type: array
          items:
            type: object
            properties:
              question: { type: string }
              answer: { type: string }

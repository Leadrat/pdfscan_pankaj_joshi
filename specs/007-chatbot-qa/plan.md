# Implementation Plan: Chatbot Q&A from Brochure Data

**Branch**: `007-chatbot-qa` | **Date**: 2025-11-10 | **Spec**: ./spec.md
**Input**: Feature specification from `/specs/007-chatbot-qa/spec.md`

**Note**: This template is filled in by the `/speckit.plan` command. See `.specify/templates/commands/plan.md` for the execution workflow.

## Summary

Build a context-grounded chatbot that answers user questions strictly from structured brochure data (from Spec 6). The chatbot appears only after extraction completes, provides a modern animated UI, and replies concisely with an exact fallback when data is missing.

## Technical Context

**Language/Version**: Python 3.11  
**Primary Dependencies**: Flask, Flask-CORS, google-generativeai, TailwindCSS, Framer Motion  
**Storage**: SQLite (temporary chat logs optional)  
**Testing**: Manual scenarios; schema validation for API; UI smoke flows  
**Target Platform**: Web app (existing frontend + Flask backend)  
**Project Type**: Web application  
**Performance Goals**: Typical response ≤ 3s, concise outputs  
**Constraints**: Answers grounded to structured JSON; exact fallback phrase; show chat only when extraction complete  
**Scale/Scope**: Single‑project session chat; page‑lifetime history per research

## Constitution Check

*GATE: Must pass before Phase 0 research. Re-check after Phase 1 design.*

- Simplicity: Floating button + single route `/chatbot/query`. PASS
- Intelligence: Uses Gemini 2.5‑Flash; grounded to Spec 6 JSON. PASS
- Speed: ≤ 3s typical; typing animation fallback. PASS
- Reliability: Exact fallback; input validation; logs. PASS
- Data Privacy & Security: API key via env; minimal logs. PASS
- Accessibility & Performance: Responsive UI; animations; contrast. PASS
- Observability & Logging: Summaries/metrics; no raw LLM. PASS

## Project Structure

### Documentation (this feature)

```text
specs/007-chatbot-qa/
├── plan.md
├── research.md
├── data-model.md
├── quickstart.md
├── contracts/
│   └── openapi.yaml
└── tasks.md (to be generated by /speckit.tasks)
```

### Source Code (repository root)

```text
backend/
├── routes/
│   └── (new) chatbot_routes.py     # POST /chatbot/query
├── services/
│   └── (new) chatbot_service.py    # grounding, prompt, call, validation
└── app.py                          # register blueprint

frontend/
├── src/components/chat/ChatButton.jsx
├── src/components/chat/ChatWindow.jsx
├── src/components/chat/ChatMessage.jsx
└── src/hooks/useChatbot.js
```

**Structure Decision**: Extend backend with a new chatbot route and service; add frontend chat components with TailwindCSS + Framer Motion. No new projects created.

## Complexity Tracking

> **Fill ONLY if Constitution Check has violations that must be justified**

| Violation | Why Needed | Simpler Alternative Rejected Because |
|-----------|------------|-------------------------------------|
| [e.g., 4th project] | [current need] | [why 3 projects insufficient] |
| [e.g., Repository pattern] | [specific problem] | [why direct DB access insufficient] |
